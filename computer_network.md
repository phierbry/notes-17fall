# 计算机网络 review

TODO
- 数据链路层 40页
- 网络层 80页
- 运输层 40页
- 应用层 70页


## chap-1 Introduction
### 互联网边缘部分和核心部分
边缘部分：由主机组成（端系统），两种通信模式：客户端服务器，P2P（对等连接方式）  
核心部分：由路由器和网络组成 核心技术-分组转发技术  
主机vs路由器：主机是为用户进行信息处理的，路由器是用来转发分组的。  
分组转发技术：要转发的一整块数据是报文 message ，划分成数据段 加上首部 header 形成了分组   packet。由于首部存有包含源地址目的地址等控制信息，每一个分组可以单独转发。每传到一段链路才占用资源。路由器具有存储功能。  
分组交换的优点：对每个分组动态分配传输带宽，每一个分组独立选择路由，一份组作为传输单位，不用先建立连接就能向其他主机发送分组。网络协议保证了可靠性。  
分组交换的缺点：首部信息造成了额外的开销，分组交换网需要管理和控制机制，存储转发意味着排队和时延  

### 计算机网络分类  
作用范围分类：广域网 （WAN），局域网（LAN）。。。  
网络使用者：公用网（ISP）， 专用网（自搭建）  

### 性能度量
速率：数据率，比特率 bit/s 注意这仅仅是额定速率而非实际运行速率  
带宽：有两种含义。频域含义：这更接近字面意思，信号的所有频率占的频域宽度。时域含义：传输通道的最高比特率，也就是速率的单位。  
吞吐量（throughput）：单位时间实际传输的数据量。速率和带宽作为额定速率，所以是吞吐量的上限。  
时延：总时延 = 发送时延 + 传输时延 + 处理时延 + 排队时延  
发送时延：节点（主机或路由器）发送一个数据帧所需的时间，= 数据帧长度/发送速率 ， 一个个bit全部通过出口的总时间  
传输时延：在链路上传输， = 信道长度/传输速率  
处理时延：节点（主机或路由）需要处理首部等信息  
排队时延：在路由器的内存中等待前面的分组先传  
易错点：高速链路网络（减小的是发送时延而非传输时延），传输时延取决于物理介质。提高带宽使用的技术是减小发送时延（侧面说明了发送时延占的一定主导地位）。  
其他的度量单位还有：时延带宽积，往返时间，利用率。  

### 计算机网络体系结构
分层结构  
- 五层协议 - 物理层，数据链路层，网络层，运输层，应用层  
- OSI 7层 - 物理层，数据链路层，网络层，运输层，会话层，表示层，应用层  
- TCP/IP - 网络接口层，网际层IP，运输层（TCP，UDP），应用层（TELNET，FTP，SSH，SMTP。。。）  
每一层应该具有的基本功能  
- 差错控制：保证可靠性  
- 流量控制：发送端的传输要保证接收端能够来得及收  
- 连接建立和释放：发送端主导建立的逻辑连接  
- 复用和分用：发送端自上而下复用，接收端自下而上分用  
- 分段和重装：发送端自上而下分段，接收端自下而上重装  
  
五层协议 （传输单位，任务，协议）自上而下  
- 应用层：报文message，应用进程间的交互和通信，常见的协议是万维网的HTTPS，电子邮件的SMTP，域名的DNS。。。  
- 运输层：两台主机中进程之间的通信，主要有TCP和UDP两种协议  
	- TCP（transmission control protocol）单位是报文段（segment），面向连接的，可靠的数据传输  
	- UDP（user datagram protocol）单位是用户数据报（user datagram），无连接，最大努力，不保证可靠  
- 网络层：IP数据报（数据报，分组），为分组交换网的不同主机提供传输。协议IP（Internet protocol）无连接的网际协议。  
- 数据链路层：帧frame，两个节点之间的数据传输，控制信息（同步，地址，差错控制）。除了加首部以外还要加尾部。  
- 物理层：bit，由于是比特流，所以不再加首部和尾部，考虑发送的参数和接收时的解码，但是不用规定传输介质。  

TCP/IP 体系结构  
- 主机使用全部的四层，路由器只使用下面的两层“网络接口层”和“网际层”。  
- TCP/IP没有按照严格的分层发展，上面的运输层和应用层可能直接的使用下面的网际层甚至是网络接口层。  

PDU protocol data unit 协议数据单元  


## Chap-2 物理层
本章重点：物理层的任务，几种常用的信道复用技术，几种常用的宽带接入技术。  
物理层考虑怎样在连接不同计算机之间的传输媒体上传输比特流。  

### 数据通信基础知识

#### 数据通信系统模型
源点 -[数字信号]- 发送器 -[模拟或数字信号]- 传输系统 -[模拟或数字信号]- 接收器 -[数字信号]- 终点  

#### 信道的基本模型
一条信道的方向是固定的，不会改变
- 单向通信（单工）：需要一条信道，只能有一个方向的通信，没有互动。eg. 无线电广播
- 双向交替通信（半双工，混淆的是有时也称为单工）：需要`两条`信道。两端不能同时发送或同时接收，交替变化身份。
- 双向同时通信（全双工）：两条信道。两端可以同时发送和接收。

信源输出的信号（`基带信号`）不一定能直接在信道上传播，需要对它进行变化，称为`调制`。  
`调制`的办法有两种  
- 基带调制：一是直接将数字信号变为方波，不改变频率。变化后仍然是基带信号，所以也称编码。
	- 不归零制，归零制，曼彻斯特，曼彻斯特差分
- 带通调制：使用高频的载波把信号移到高频，调制之后的信号成为模拟信号，称为带通信号。
	- 调频，调幅，调相
	- 为了达到更高的信息传输速率，会采用多元结合的调制 e.g. 正交振幅调制 QAM  

#### 信道的极限传输速率
码元：调制之后的信号的最小单元的形式。在QAM的例子中很容易理解这个概念。QAM中码元多，所以一个码元可以表示的基带信号的位数也多，传输速率快。但是，码元不是越多越好，因为接收端的识别失真的信号会有很大困难，出错率很大。    
传输信号失真引入噪声和信噪比等通信概念    
- 信噪比，以分贝为单位： $S/N(dB) = 10\log_{10} S/N $  
- Shannon 极限传输速率：$C = W\log_2(1+S/N)$ (bit/s)。正相关于带宽和信噪比。  

### 物理层下面的传输媒体
总的频域（从无线电到紫外线）也称为传输介质，分为引导型和非引导型  
导引型：电磁波在固体介质中传播，双绞线，同轴电缆，光纤等  
非导引型：电磁波在自由空间传播，也称为无线传输，频域很广  
无线局域网使用的无线电频段 - 中国的ISM标准。。。  
其他通信方式：卫星通信，光通信，毫米波通信。。。  

### 信道复用技术
多对通信的双方需要多条独立的信道。但可以在一条信道上进行复用 multiplexing 产生多条信道的效果。
在发送方这一端，有复用器，在接收方这一端有分用器。有两种常见复用策略：  
- 时分复用（TDM time division multiplexing）：将时间划分为一个个TDM帧，不同用户在不同时间占有同样的频带资源。
- 频分复用（FDM）：将总的带宽资源划分成多个频带给用户，不同用户在相同时间占有不同的频带资源。
- 优化：这样的复用方式不够灵活造成很多浪费，优化有很多，比如statics TDM 发送端加一个集中器，根据待发数据量来分时。
码分复用（CDM）：也常用码分多址这个名词。各用户选用不同的m-bit码型（码片序列），每一个比特的时间划分成m个短时间间隔。  
码型的选择要互不干扰 - 不同码型内积为0，自己和自己内积为1，自己和自己的反内积为-1。根据上面的性质，接收端只需要用希望接受的发送端的码型对收到的数据进行内积即可过滤出期望的数据。实际使用中采用伪随机码序列来保持正交。  
码片实际上实现了扩频，原来传一个bit现在要传m个，频率提高了m倍，频带宽度也变为m倍。发送信息的数据率 b bit/s, 实际发送速率 mb bit/s。  

### 宽带接入技术
用户上网必须通过先连接到ISP（Internet service provider）获得IP地址。这个连接到ISP过程就是宽带接入技术。这里只讨论有线宽带接入技术。
- 非对称数字用户线技术（asymmetric digital subscriber line）
	- 用数字技术对已有的模拟信号电话线进行改造，使其能够承受宽带数字业务。
	- 把0-4KHz仍然保留给电话，把40kHz-1MHz用于宽带。下行带宽大于上行带宽，所以 asymmetric。
	- 传输距离取决于数据率和用户线的粗细。
	- 调制依赖于用户线两端的调制解调器，我国采用DMT（discrete multiple tone）离散多音调调制，划分多个子信道，每个信道不同的载波（音调）。
	- 数据率取决于传输距离、线的质量、干扰等多个因素，ADSL采用自适应技术，通过测试，提供尽可能大的数据率，不保证固定数据率。
- 光纤同轴混合网HFC（hybrid fiber coax）
	- 在有线电视网CATV基础上开发出来的宽带接入技术，CATV是树形拓扑结构的同轴电缆网络，利用频分复用单向传递电视节目。
	- 将同轴电缆的主干部分（树的上部）替换为光纤，采用模拟光纤技术，光的振幅调制。树的下部（光纤节点之后）仍然是同轴电缆。光纤节点将光信号转换为电信号。
	- 用户端需要电缆调制解调器，但另一端不需要。电缆调制解调器传输速率高。
- FTTx （Fiber to the x）
	- 表示多种居民宽带接入方案。FTTH（home）、FTTB（building）、FTTC（curb）
	- 多采用无源光网络，有源的成本较高。



## Chap-3 数据链路层
TODO  


## Chap-4 网络层
TODO  


## Chap-5 运输层
TODO  


## Chap-6 应用层
TODO  


